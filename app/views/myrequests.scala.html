@(user: models.User)

@main("Give! - Requests", user) {

    <h1>Mes demandes</h1>

    @if(user.requests.isEmpty) {
        <p>Aucune demande pour le moment ...</p>

        <div class="alert alert-info" role="alert">
            <strong>Astuce !</strong> Ajoutez de nouvelles relations en allant sur <a href="/users">la page de gestion de contacts ...</a>
        </div>

    } else {

        <table id="myrequests" class="table table-bordered">
        @for(request <- user.requests.toSeq.sortBy(_.gift.name).groupBy(_.gift.category).flatMap(_._2)) {
            <tr>
                <td>
                @if(request.gift.photoBase64) {
                    <img src="data:image/jpeg;base64,@request.gift.photoBase64"/>
                }
                </td>
                <td>
                    <span class="user-name">@request.requester.name</span>
                    donne <span class="gift-name">@request.gift.name</span>
                    <span class="gift-category-name">@request.gift.category.name</span>
                    <p>
                    @request.gift.description
                    </p>
                    <form id="removeRequest" action = "/requests/remove" method="POST">
                        <input type="hidden" value="@request.id" name="requestId" />
                        <button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
                    </form>
                </td>
            </tr>
        }
        </table>
    }

}